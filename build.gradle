plugins {
    id("com.gradleup.shadow") version "9.0.0-beta13" apply false
    id("io.papermc.paperweight.userdev") version "2.0.0-beta.16" apply false
}

subprojects {
    apply plugin: "java"

    repositories {
        mavenCentral()

        maven {url = "https://jitpack.io"}
        maven {url = "https://repo.papermc.io/repository/maven-public/"}
    }

    dependencies {
        implementation("com.github.TheComputerGeek2.MagicSpells:core:3064371340") {transitive = false}
    }

    java {
        var version = 21
        sourceCompatibility = version
        targetCompatibility = version
        toolchain.languageVersion = JavaLanguageVersion.of(version)
    }

    tasks.withType(JavaCompile).configureEach {
        options.encoding = "UTF-8"
    }

    processResources {
        var v = version.toString()
        expand(["version": v.startsWith("v") ? v.substring(1) : v])
    }

}
